<script type="text/x-red" data-template-name="lz4">
    <div class="form-row">
	      <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
	      <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-row">
        <label for="node-input-datatype"><i class="fa fa-file-text"></i> Decompress as</label>
        <select id="node-input-datatype" style="width:70%;">
            <option value="buffer">a Buffer</option>
            <option value="utf8">a String</option>
            <option value="json">a parsed JSON object</option>
        </select>
    </div>
</script>

<script type="text/x-red" data-help-name="lz4">
    <p>If the input is a compressed buffer (lz4 magic bytes detected) it tries to decompress into the requested output type.</p>
    <p>If the input is an uncompressed buffer (lz4 magic bytes not detected) it tries to compress to a buffer.</p>
    <p>If the input is a string it creates a compressed buffer from the string.</p>
    <p>If the input is a an object, it converts it to JSON and then creates a compressed buffer.</p>
</script>

<script type="text/javascript">
    RED.nodes.registerType('lz4',
        {
            category:   'function',
            color:      '#DEBD5C',
            defaults:
            {
                name:     { value: '' },
                datatype: { value: 'buffer' }
            },
            icon:       'file.png',
            inputs:     1,
            label:      function() { return this.name || 'lz4'; },
            labelStyle: function() { return this.name ? 'node_label_italic' : ''; },
            outputs:    1
        }
    );
</script>